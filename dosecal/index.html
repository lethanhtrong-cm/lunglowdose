<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CT Dose</title>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ]
        },
        chtml: {
          scale: 0.95
        }
      };
    </script>

    <script src="https://cdn.counter.dev/script.js" data-id="86e74dda-26a8-41de-99d1-63d0e8fec60e" data-utcoffset="7"></script>

    <style>
        /* CSS Variables */
        :root {
            --primary-color: #0056b3; /* Blue */
            --secondary-color: #007BFF; /* Lighter Blue */
            --text-color: #212529; /* Darker text for better contrast */
            --text-light: #495057; /* Lighter text */
            --light-gray: #f8f9fa; /* Slightly lighter gray */
            --white: #fff;
            --border-color: #dee2e6; /* Default border color */
            --cell-border-color: #ddd; /* Internal cell border color */
            --header-bg: var(--primary-color);
            --header-text: var(--white);
            --link-color: var(--primary-color);
            --link-hover-color: #003d80;
            --table-header-bg: var(--primary-color); /* Consistent header bg */
            --table-header-text: var(--white);
            --danger-color: #dc3545; /* Red for emphasis/results */
            --font-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Switched primary font */
            --font-secondary: 'Roboto', sans-serif; /* Keep Roboto for headings */
        }

        /* Base Styles */
        html {
            scroll-padding-top: 20px; /* Adjust based on sticky nav height if needed */
            scroll-behavior: smooth;
        }
        body {
            font-family: var(--font-primary);
            background-color: var(--light-gray);
            margin: 0; padding: 0;
            line-height: 1.7;
            color: #333;
            font-size: 17px; /* Adjusted base font size */
             -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        h1, h2, h3, h4 { color: var(--primary-color); margin-top: 1.4em; margin-bottom: 0.7em; font-family: var(--font-secondary); font-weight: 600;}
        h1 { font-size: 1.8em; line-height: 1.3; }
        h2 { font-size: 1.5em; text-align: center; margin-bottom: 1.2em; }
        h3 { font-size: 1.2em; border-bottom: 2px solid var(--primary-color); padding-bottom: 5px; display: inline-block; margin-bottom: 1em; }
        h4 { font-size: 1.0em; border-bottom: none; padding-bottom: 0; display: block;}

        a { color: #007BFF; text-decoration: none; transition: color 0.2s ease;}
        a:hover { color: #0056b3; text-decoration: underline; }
        hr { border: none; border-top: 1px solid #ccc; margin: 1.5em 0; }
        em { font-style: italic; }
        strong { font-weight: 600; color: var(--primary-color); }

        /* Centered Page Layout */
        .page-container { display: flex; max-width: 1200px; margin: 20px auto; align-items: flex-start; gap: 20px; padding: 0 15px; box-sizing: border-box; }

        /* Side Navigation Bar Styles */
        .side-nav { flex: 0 0 200px; position: sticky; top: 20px; height: calc(100vh - 40px); background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 6px; padding: 12px; box-sizing: border-box; overflow-y: auto; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .side-nav h3 { margin-top: 0; margin-bottom: 12px; font-size: 1.0em; color: #343a40; border-bottom: 1px solid #ccc; padding-bottom: 8px; }
        .side-nav ul { list-style: none; padding: 0; margin: 0; }
        .side-nav li { margin-bottom: 4px; }
        .side-nav a { display: block; padding: 7px 10px; color: #0056b3; text-decoration: none; border-radius: 4px; transition: background-color 0.2s ease, color 0.2s ease; font-size: 0.9em; }
        .side-nav a:hover, .side-nav a.active { background-color: var(--secondary-color); color: white; text-decoration: none; }

        /* Main Content Area Styles */
        .main-content-area { flex: 1; min-width: 0; }

        /* Header Styles */
        .main-header { background-color: var(--primary-color); color: white; padding: 20px; text-align: center; margin-bottom: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-radius: 8px; }
        .main-header h1 { margin: 0 0 8px 0; font-size: 1.7em; color: white; }
        .main-header p { font-size: 1.0em; margin: 0; opacity: 0.9; }

        /* Main Content Area */
        main { padding: 0; }

        /* Section Styles */
        .content-section { background: #fff; padding: 20px 25px; border-radius: 8px; box-shadow: 0 3px 8px rgba(0,0,0,0.06); margin-bottom: 25px; border: 1px solid #e0e0e0; }
        .content-section h2 { margin-top: 0; margin-bottom: 20px; }
        .content-section h3 { margin-top: 0; margin-bottom: 12px; font-size: 1.25em; }


        /* Calculator Section Specifics */
        .calculator-section .form-group { display: flex; flex-wrap: wrap; gap: 12px 18px; align-items: baseline; margin-bottom: 15px; }
        .calculator-section .form-item { flex: 1 1 140px; min-width: 130px; margin-bottom: 5px; }
        .calculator-section label { font-weight: 600; display: block; margin-bottom: 5px; font-size: 0.85em; color: #555; }
        .calculator-section input, .calculator-section select { width: 100%; padding: 7px 9px; font-size: 0.9em; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; transition: border-color 0.2s ease; }
        .calculator-section input:focus, .calculator-section select:focus { border-color: var(--secondary-color); outline: none; box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); }
        .calculator-section input[readonly] { background-color: #e9ecef; cursor: not-allowed; }
        .calculator-section .button-container { text-align: center; flex-basis: 100%; margin-top: 12px; }
        .calculator-section button#calculateButton { padding: 8px 20px; background: var(--secondary-color); color: white; border: none; font-size: 0.95em; border-radius: 6px; cursor: pointer; transition: background-color 0.2s ease; }
        .calculator-section button#calculateButton:hover { background: var(--primary-color); }

        /* Patient Info Group Styles */
        .patient-info-group { border-top: 1px dashed #ccc; margin-top: 15px; padding-top: 15px; margin-bottom: 5px; }
        .patient-info-group h4 { margin-top: 0; margin-bottom: 12px; font-size: 0.95em; color: #6c757d; border-bottom: none; padding-bottom: 0; display: block; }

        /* Result Display Styles */
        .result-display { margin-top: 15px; padding: 12px; text-align: center; font-size: 1.1em; font-weight: bold; border-radius: 6px; }
        #resultDose.success { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; }
        #resultDose.error { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; }

        /* Risk Warning Display Styles (on screen) */
        .risk-warning-display { margin-top: 12px; padding: 12px 18px; font-size: 0.85em; border-radius: 6px; background-color: #fff3cd; border: 1px solid #ffeeba; color: #856404; text-align: left; line-height: 1.6; display: none; }
        .risk-warning-display p { margin-bottom: 0.7em; text-align: justify; }
        .risk-warning-display p:first-child { font-weight: bold; text-align: left; }
        .risk-warning-display ul { padding-left: 18px; margin-top: 0.4em; margin-bottom: 0; list-style-position: outside; }
        .risk-warning-display li { margin-bottom: 0.3em; text-align: justify; }

        /* Print Button Styles */
         .print-button-container { text-align: center; margin-top: 20px; }
         #printButton { padding: 8px 18px; background-color: #17a2b8; color: white; border: none; font-size: 0.95em; border-radius: 6px; cursor: pointer; transition: background-color 0.2s ease; display: none; }
         #printButton:hover { background-color: #138496; }

         /* Base Table Styles */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; border: 1px solid var(--border-color); } /* Default border color */
        th, td { padding: 10px 12px; text-align: left; border: 1px solid var(--cell-border-color); vertical-align: middle; } /* Use cell border color */
        tbody tr:hover { background-color: #e9ecef; }

        /* --- Styling for Dose Comparison Table --- */
        .dose-table { border: 2px solid var(--primary-color); } /* Thicker border */
        .dose-table th { background-color: var(--primary-color); color: var(--table-header-text); font-weight: 600; border-bottom: 2px solid var(--primary-color); text-align: center; padding: 9px 10px; font-size: 0.95em; }
        .dose-table tbody tr:nth-child(even) { background-color: #e7f3ff; }
        .dose-table tbody tr:nth-child(odd) { background-color: var(--white); }
        .dose-table tbody tr:hover { background-color: #d1e7ff; }
        .dose-table td { padding: 9px 10px; font-size: 0.9em; }
        .dose-table td:nth-child(2), .dose-table td:nth-child(3) { text-align: center; font-family: var(--font-secondary); }
        .dose-table td:first-child { font-weight: 500; text-align: left; }

        /* --- K-Factor Table Style --- */
        .k-factor-table { border: 1px solid var(--border-color); } /* Keep default border */
        .k-factor-table th { background-color: #e9ecef; color: #495057; font-weight: 600; border-bottom: 2px solid #007BFF; text-align: center; padding: 9px 10px; font-size: 0.95em; }
        .k-factor-table tbody tr:nth-child(even) { background-color: #f8f9fa; }
        .k-factor-table tbody tr:nth-child(odd) { background-color: var(--white); }
        .k-factor-table tbody tr:hover { background-color: #e2e6ea; }
        .k-factor-table td { padding: 9px 10px; font-size: 0.9em; text-align: center; }
        .k-factor-table td:first-child { text-align: left; font-weight: normal;}

        /* --- Report Table Style (Blue Border) --- */
         .report-table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.95em;
            border: 2px solid var(--secondary-color); /* <<< VI·ªÄN XANH CHO B·∫¢NG */
        }
         .report-table th, .report-table td {
            border: 1px solid var(--cell-border-color); /* <<< Gi·ªØ vi·ªÅn trong m√†u x√°m nh·∫°t */
            padding: 6px 8px;
            text-align: center;
            vertical-align: middle;
            white-space: nowrap;
        }
         .report-table th {
            background-color: #e9ecef;
            color: #495057;
            font-weight: bold;
            border-bottom: 1px solid var(--cell-border-color); /* Match cell border */
        }
         .report-table td:first-child {
            text-align: left;
            white-space: normal;
            word-break: break-word;
             font-weight: normal;
        }
         .report-table tbody tr:nth-child(even),
         .report-table tbody tr:nth-child(odd) {
            background-color: transparent; /* No alternating color */
        }
         .report-table tbody tr:hover {
            background-color: #f0f0f0; /* Simple light gray hover */
        }
         /* Ensure text alignment overrides justify */
         .report-table td { text-align: center; hyphens: none;}
         .report-table td:first-child { text-align: left; hyphens: none;}


        /* Source Citation Style */
        .source { font-size: 0.85em; color: #666; margin-top: 15px; text-align: right; }
        .source strong { font-weight: 600; }
        .source a { color: #0056b3; }

        /* Home Button Style */
        .home-button { display: block; width: fit-content; padding: 8px 18px; background-color: #007BFF; color: white; border: none; border-radius: 6px; text-align: center; font-size: 0.95em; margin: 25px auto 10px auto; cursor: pointer; text-decoration: none; transition: background-color 0.2s ease; }
        .home-button:hover { background-color: #0056b3; color: white; text-decoration: none; }

        /* Dose Report Illustration Styles */
        .dose-report-text-container { border: 1px solid #007BFF; border-radius: 8px; padding: 15px; background-color: #f8f9fa; font-family: 'Courier New', Courier, monospace; font-size: 0.85em; margin-bottom: 15px; }
        .dose-report-header { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; border-bottom: 1px dashed #007BFF; padding-bottom: 12px; margin-bottom: 12px; }
        .report-title-meta { flex-basis: 60%; min-width: 250px; }
        .report-title-meta h3 { margin: 0 0 8px 0; color: #007BFF; font-size: 1.3em; border: none; padding: 0;}
        .meta-data span { display: inline-block; margin-right: 15px; margin-bottom: 4px; font-weight: bold; color: #333; font-size: 0.95em; }
        .general-info p { margin: 4px 0 0 0; font-size: 0.9em; color: #555; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.5; text-align: left; hyphens: none; }
        .phantom-info { flex-basis: 35%; min-width: 180px; border: 1px solid #ccc; padding: 8px 12px; border-radius: 5px; background-color: #fff; text-align: center; }
        .phantom-info h4 { margin: 0 0 6px 0; font-size: 1.0em; color: #0056b3; border: none; padding: 0;}
        .phantom-info p { margin: 3px 0; font-size: 0.85em; text-align: center; hyphens: none;}
        .phantom-info hr { margin: 6px 0; border-top: 1px solid #eee; }

        /* Responsive Table Wrapper */
        .table-responsive-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; margin-bottom: 1em; }

        .report-note { font-size: 0.8em; font-style: italic; color: #555; margin-top: 8px; text-align: right; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .caption-text { font-size: 0.9em; color: #333; line-height: 1.6; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: justify; }

        /* Warning Section Styles */
        .warning-section { background-color: #fef9e7; border-left: 5px solid #f1c40f; padding: 15px 20px; }
        .warning-section h2, .warning-section h3 { color: #b7950b; border-color: #f1c40f;}
        .warning-section hr { border-top: 1px solid #f1c40f; }
        .warning-section ul { padding-left: 18px; list-style-position: outside; }
        .warning-section ul ul { margin-top: 4px; }
        .warning-section .emphasis-message { font-weight: bold; text-align: center; margin-top: 1.2em; color: #b7950b; font-size: 0.95em;}
        .warning-section .source-link { text-align: center; margin-top: 0.8em; font-size: 0.9em; }

        /* Explanation Section Styles */
        .formula-display { font-size: 1.0em; background-color: #e7f3ff; padding: 12px; border-radius: 6px; border: 1px solid #007BFF; color: #0056b3; text-align: center; margin: 1.2em 0; overflow-x: auto; }
        .explanation-section h3, .explanation-section h4 { margin-bottom: 0.4em; }
        .explanation-section p, .explanation-section ul { margin-bottom: 0.9em; }
        .explanation-section ul { padding-left: 20px; list-style-position: outside; }

        /* Justify Text for specific paragraphs */
        .calculator-section > p, .warning-section > p, .explanation-section p, .dose-comparison-section > p, .caption-text {
            text-align: justify; hyphens: auto; -webkit-hyphens: auto; -moz-hyphens: auto;
        }
         /* Override justify for specific elements */
        .warning-section .emphasis-message, .warning-section .source-link,
        .general-info p, .phantom-info p,
        .risk-warning-display p:first-child /* Keep first line of warning left aligned */
         { text-align: revert; hyphens: none;}

        /* Footer Styles */
        .main-footer { background-color: #007BFF; color: #ffffff; padding: 25px 20px; margin-top: 35px; text-align: center; font-size: 0.85em; border-radius: 8px; }
        .main-footer p { margin: 6px 0; line-height: 1.6; opacity: 0.95; text-align: center; font-size: 0.95em;}
        .main-footer strong { color: #ffffff; }
        .main-footer em { font-style: italic; opacity: 0.85; display: block; margin-top: 12px; font-size: 0.9em;}
        .main-footer a { color: #cce5ff; }
        .main-footer a:hover { color: #ffffff; text-decoration: underline; }

        /* Responsive Styles */
        @media (max-width: 992px) {
             body { font-size: 15px; } /* Base for medium screens */
             .page-container { max-width: 100%; gap: 15px; padding: 0 10px; }
             .side-nav { flex-basis: 180px; font-size: 0.9em;}
             .side-nav a { padding: 6px 10px; font-size: 0.9em; }
             .main-header h1 { font-size: 1.5em;}
             .main-header p { font-size: 0.95em;}
             h2 { font-size: 1.4em;}
             h3 { font-size: 1.15em;}
        }
        @media (max-width: 768px) {
             body { font-size: 15px; } /* Keep 15px for small screens */
             .page-container { display: block; padding: 0 5px; }
             .side-nav { display: none; }
             .main-content-area { margin-left: 0; }
             .main-header, .main-footer { border-radius: 0; margin-bottom: 20px; margin-top: 0;}
             .content-section { padding: 15px 20px; margin-bottom: 20px; }
             .calculator-section .form-item { flex-basis: calc(50% - 10px); }

             .report-table th, .report-table td { padding: 4px 6px; font-size: 0.85em; }
             .report-table { min-width: 0; }
             .dose-table th, .dose-table td { font-size: 0.85em; padding: 7px 8px;}
             .k-factor-table td { font-size: 0.9em; }
             #dose-report { display: none; }
        }
         @media (max-width: 480px) {
             body { font-size: 14px; } /* Slightly smaller on extra small */
              .page-container { padding: 0 3px; }
              .main-header h1 { font-size: 1.3em;}
              .main-header p { font-size: 0.85em;}
              h2 { font-size: 1.2em;}
              h3 { font-size: 1.05em;}
              .content-section { padding: 12px 15px; }
              .calculator-section .form-item { flex-basis: 100%; }
              .formula-display { font-size: 0.9em; padding: 8px;}
               .dose-table th, .dose-table td { font-size: 0.8em; padding: 5px 6px;}
               .k-factor-table td { font-size: 0.85em; }
               .report-table th, .report-table td { font-size: 0.75em; }
         }


        /* Print Styles (Reverted) */
        #print-output-container { display: none; }
        @media print {
             body > *:not(#print-output-container) { display: none !important; visibility: hidden !important; }
             @page { size: A4; margin: 20mm 15mm 20mm 15mm; }
             html, body { width: 100% !important; height: auto !important; background: #fff !important; margin: 0 !important; padding: 0 !important; color: #000 !important; font-size: 10.5pt !important; line-height: 1.4 !important; font-family: 'Times New Roman', Times, serif !important; }
             #print-output-container { display: block !important; visibility: visible !important; width: 100% !important; max-width: none !important; margin: 0 !important; padding: 0 !important; border: none !important; box-shadow: none !important; background: none !important; }
             #print-title { text-align: center; font-size: 14pt; font-weight: bold; margin-bottom: 15mm; padding-bottom: 5mm; border-bottom: 1px solid #000; font-family: 'Arial', sans-serif; }
             .print-section { border: 1px solid #333; padding: 3mm 5mm; margin-bottom: 8mm; page-break-inside: avoid; }
             .print-section h4 { margin: 0 0 3mm 0; font-size: 11pt; font-weight: bold; border-bottom: 1px dotted #555; padding-bottom: 1.5mm; color: #000; font-family: 'Arial', sans-serif; }
             .print-section p { margin: 0 0 1.5mm 0; font-size: 10.5pt; }
             .print-label { display: inline-block; width: 100px; font-weight: normal; padding-right: 5px; box-sizing: border-box; }
             #print-patient-info span:not(.print-label), #print-input-params span:not(.print-label) { font-weight: bold; }
             #print-formula { margin: 5mm 0 !important; padding: 3mm 5mm !important; border: 1px dashed #555 !important; background-color: transparent !important; color: #000 !important; font-size: 10pt !important; text-align: center; font-style: italic; border-radius: 0 !important; box-shadow: none !important; page-break-inside: avoid; }
             #print-result-dose { margin: 5mm 0 !important; padding: 4mm 5mm !important; border: 1px solid #000 !important; background-color: transparent !important; color: #000 !important; font-size: 11pt !important; border-radius: 0 !important; box-shadow: none !important; font-weight: bold; text-align: center; page-break-inside: avoid; }
             #print-risk-warning { font-size: 10pt !important; border: 1px solid #333 !important; padding: 3mm 5mm !important; margin-bottom: 8mm !important; page-break-inside: avoid; background: none !important; color: #000 !important; }
             #print-risk-warning p, #print-risk-warning li { margin-bottom: 1.5mm; text-align: left !important; color: #000 !important; }
             #print-risk-warning p:first-child { font-weight: bold; font-size: 10.5pt; }
             #print-risk-warning ul { padding-left: 5mm; margin-top: 1mm; list-style-type: disc; list-style-position: outside; }
             #print-risk-warning strong { font-weight: bold; color: #000 !important; }
             #print-date-footer { text-align: right; font-size: 9pt; margin-top: 15mm; border-top: none; padding-top: 0; font-style: normal; }
             .no-print { display: none !important; }
             a[href]:after { content: "" !important; }
             .MathJax_Processing, .MathJax_Processed { display: none !important;}
        }
        /* --- END: Print Styles --- */

    </style>

</head>
<body>

    <div class="page-container">

        <nav class="side-nav no-print">
            <h3>DANH M·ª§C</h3>
            <ul>
                <li><a href="#calculator" class="active">M√°y t√≠nh Li·ªÅu</a></li>
                <li><a href="#dose-report">Minh h·ªça Dose Report</a></li>
                <li><a href="#jama-warning">C·∫£nh b√°o JAMA</a></li>
                <li><a href="#dlp-explanation">Gi·∫£i th√≠ch DLP</a></li>
                <li><a href="#effective-dose-explanation">Gi·∫£i th√≠ch Li·ªÅu hi·ªáu d·ª•ng</a></li>
                <li><a href="#cancer-risk-explanation">∆Ø·ªõc t√≠nh Nguy c∆°</a></li>
                <li><a href="#dose-comparison">So s√°nh Li·ªÅu</a></li>
            </ul>
        </nav>

        <div class="main-content-area">

            <header class="main-header no-print">
                <h1>Th√¥ng tin v√† C√¥ng c·ª• t√≠nh to√°n Li·ªÅu b·ª©c x·∫° <span lang="en">CT</span></h1>
                <p>H∆∞·ªõng d·∫´n, c√¥ng c·ª• t√≠nh li·ªÅu hi·ªáu d·ª•ng t·ª´ $DLP$, v√† th√¥ng tin tham kh·∫£o v·ªÅ li·ªÅu b·ª©c x·∫° trong X-quang v√† <span lang="en">CT</span>.</p>
            </header>

            <main>
                <section id="calculator" class="content-section calculator-section">
                    <h2 class="no-print">C√¥ng c·ª• t√≠nh Li·ªÅu hi·ªáu d·ª•ng t·ª´ $DLP$</h2>
                    <p class="no-print">∆Ø·ªõc t√≠nh Li·ªÅu hi·ªáu d·ª•ng ($E$, <span lang="en">Effective Dose</span>) d·ª±a tr√™n ch·ªâ s·ªë $DLP$ (<span lang="en">Dose-Length Product</span>) v√† v√πng c∆° th·ªÉ qu√©t <span lang="en">CT</span>. K·∫øt qu·∫£ bao g·ªìm ∆∞·ªõc t√≠nh nguy c∆° ung th∆∞ li√™n quan (d·ª±a tr√™n m√¥ h√¨nh LNT) v√† t√πy ch·ªçn in b√°o c√°o t√≥m t·∫Øt.</p>

                    <div class="patient-info-group no-print">
                        <h4>Th√¥ng tin b·ªánh nh√¢n (kh√¥ng b·∫Øt bu·ªôc - ƒë·ªÉ in b√°o c√°o)</h4>
                        <div class="form-group">
                            <div class="form-item">
                                <label for="patientName">T√™n B·ªánh nh√¢n:</label>
                                <input id="patientName" type="text" placeholder="Nguy·ªÖn VƒÉn A">
                            </div>
                            <div class="form-item">
                                <label for="patientAge">Tu·ªïi:</label>
                                <input id="patientAge" type="number" placeholder="30" min="0">
                            </div>
                            <div class="form-item">
                                <label for="patientId">ID B·ªánh nh√¢n:</label>
                                <input id="patientId" type="text" placeholder="1234567">
                            </div>
                        </div>
                    </div>

                    <div class="form-group no-print">
                        <div class="form-item">
                            <label for="bodyRegion">V√πng c∆° th·ªÉ:</label>
                            <select id="bodyRegion">
                                <option value="">-- Ch·ªçn v√πng --</option>
                                <option value="0.0021">ƒê·∫ßu</option>
                                <option value="0.0059">C·ªï</option>
                                <option value="0.014">Ng·ª±c</option>
                                <option value="0.015">B·ª•ng</option>
                                <option value="0.019">Khung ch·∫≠u</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <label for="kValue">H·ªá s·ªë $k$ ($mSv \cdot mGy^{-1} \cdot cm^{-1}$):</label>
                            <input id="kValue" type="text" readonly placeholder="T·ª± ƒë·ªông">
                        </div>
                        <div class="form-item">
                            <label for="dlp">Nh·∫≠p $DLP$ ($mGy \cdot cm$):</label>
                            <input id="dlp" type="number" placeholder="V√≠ d·ª•: 80" min="0.1" step="any">
                        </div>
                    </div>
                    <div class="button-container no-print">
                        <button id="calculateButton">T√≠nh li·ªÅu & Nguy c∆°</button>
                    </div>

                    <div id="resultDose" class="result-display no-print"></div>
                    <div id="riskWarning" class="risk-warning-display no-print"></div>

                    <div class="print-button-container no-print">
                        <button id="printButton"><span role="img" aria-label="Print icon">üñ®Ô∏è</span> In B√°o c√°o Li·ªÅu</button>
                    </div>

                    <h3 class="no-print" style="margin-top: 30px; border: none; display: block; text-align: center;">B·∫£ng h·ªá s·ªë $k$ (Tham kh·∫£o <span lang="en">ICRP 103</span>)</h3>
                    <table class="k-factor-table no-print" style="max-width: 400px; margin: 10px auto 20px auto;">
                         <thead> <tr> <th>B·ªô ph·∫≠n</th> <th>H·ªá s·ªë $k$ ($mSv \cdot mGy^{-1} \cdot cm^{-1}$)</th> </tr> </thead>
                         <tbody>
                             <tr><td>ƒê·∫ßu</td><td>0.0021</td></tr>
                             <tr><td>C·ªï</td><td>0.0059</td></tr>
                             <tr><td>Ng·ª±c</td><td>0.014</td></tr>
                             <tr><td>B·ª•ng</td><td>0.015</td></tr>
                             <tr><td>Khung ch·∫≠u</td><td>0.019</td></tr>
                         </tbody>
                    </table>
                    <div class="source no-print">
                        <p><strong>Ngu·ªìn h·ªá s·ªë k:</strong> <a href="https://www.icrp.org/publication.asp?id=ICRP%20Publication%20103" target="_blank" rel="noopener noreferrer" lang="en">ICRP Publication 103, 2007</a></p>
                    </div>
                    <a href="https://vnrad.tech/lunglowdose/" class="home-button no-print">Tr·ªü v·ªÅ trang T·∫ßm so√°t UTP</a>
                </section>

                <section id="dose-report" class="content-section illustration-section no-print">
                    <h2>Minh h·ªça b·∫£ng (<span lang="en">Dose Report</span>)</h2>
                    <div class="table-responsive-wrapper">
                        <div class="dose-report-text-container">
                            <div class="dose-report-header">
                                <div class="report-title-meta">
                                    <h3>DOSE REPORT</h3>
                                    <div class="meta-data">
                                        <span><strong>T·ªïng mAs:</strong> 2326</span>
                                        <span><strong>T·ªïng DLP:</strong> 738 mGy¬∑cm</span>
                                    </div>
                                    <div class="general-info">
                                        <p>- B√°o c√°o li·ªÅu ƒë∆∞·ª£c t·∫°o sau khi k·∫øt th√∫c qu√° tr√¨nh qu√©t.</p>
                                        <p>- Cung c·∫•p th√¥ng tin v·ªÅ kV, mAs, $CTDI_{vol}$, $DLP$.</p>
                                    </div>
                                </div>
                                <div class="phantom-info">
                                    <h4>LI·ªÄU H·∫§P TH·ª§</h4>
                                    <p>∆Ø·ªõc t√≠nh Li·ªÅu hi·ªáu d·ª•ng ($E$) d·ª±a tr√™n:</p>
                                    <p>$E \approx \text{T·ªïng } DLP \times k$</p>
                                    <hr>
                                    <p><strong>Tham chi·∫øu Phantom:</strong></p>
                                    <p>S: $\emptyset$ 16 cm (ƒê·∫ßu/Nh·ªè)</p>
                                    <p>L: $\emptyset$ 32 cm (Th√¢n/L·ªõn)</p>
                                </div>
                            </div>
                            <table class="report-table">
                                <thead> <tr> <th>Scan</th> <th>kV</th> <th>mAs / ref.</th> <th>$CTDI_{vol}$* (mGy)</th> <th>$DLP$ (mGy¬∑cm)</th> <th>TI</th> <th>cSL (mm)</th> </tr> </thead>
                                <tbody>
                                    <tr> <td>1. Topogram</td> <td>120</td> <td>35</td> <td>0.29 (S)</td> <td>6.7</td> <td>2.4</td> <td>0.6</td> </tr>
                                    <tr> <td>2. Head</td> <td>100</td> <td>405 / 542</td> <td>39.25 (S)</td> <td>731.2</td> <td>1.0</td> <td>0.6</td> </tr>
                                </tbody>
                            </table>
                            <p class="report-note">*Gi√° tr·ªã $CTDI_{vol}$ ƒë∆∞·ª£c tham chi·∫øu theo phantom S ( $\emptyset$ 16 cm).</p>
                        </div>
                    </div>
                    <p class="caption-text"> Minh h·ªça c·∫•u tr√∫c m·ªôt b·∫£ng <span lang="en">Dose Report</span> ƒëi·ªÉn h√¨nh hi·ªÉn th·ªã sau khi k·∫øt th√∫c qu√©t <span lang="en">CT</span>. C√°c th√¥ng s·ªë quan tr·ªçng c·∫ßn l∆∞u √Ω bao g·ªìm $CTDI_{vol}$ (v√† lo·∫°i phantom tham chi·∫øu), $DLP$, <span lang="en">mAs</span>, $kVp$. Th√¥ng tin n√†y l√† c∆° s·ªü ƒë·ªÉ theo d√µi li·ªÅu v√† t√≠nh to√°n li·ªÅu hi·ªáu d·ª•ng ∆∞·ªõc t√≠nh cho b·ªánh nh√¢n. </p>
                </section>

                <article id="jama-warning" class="content-section warning-section no-print">
                    <h2><span lang="en">CT</span> v√† Nguy c∆° Ung th∆∞: Th√¥ng tin t·ª´ nghi√™n c·ª©u <span lang="en">JAMA</span></h2>
                    <p>M·ªôt nghi√™n c·ª©u ƒë∆∞·ª£c c√¥ng b·ªë tr√™n t·∫°p ch√≠ <em lang="en">JAMA Internal Medicine</em> (L∆∞u √Ω: Th√¥ng tin ng√†y th√°ng 4/2025 c·∫ßn ki·ªÉm ch·ª©ng) ƒë√£ ƒë∆∞a ra nh·ªØng ∆∞·ªõc t√≠nh v·ªÅ nguy c∆° ung th∆∞ d√†i h·∫°n li√™n quan ƒë·∫øn vi·ªác s·ª≠ d·ª•ng <span lang="en">CT</span> t·∫°i Hoa K·ª≥:</p> <ul> <li>Nghi√™n c·ª©u ∆∞·ªõc t√≠nh kho·∫£ng <strong>103.000 ca ung th∆∞ trong t∆∞∆°ng lai</strong> c√≥ th·ªÉ li√™n quan ƒë·∫øn 93 tri·ªáu l∆∞·ª£t ch·ª•p <span lang="en">CT</span> ƒë∆∞·ª£c th·ª±c hi·ªán trong nƒÉm 2023 t·∫°i Hoa K·ª≥ (chi·∫øm kho·∫£ng 5% t·ªïng s·ªë ca ung th∆∞ m·ªõi h√†ng nƒÉm t·∫°i qu·ªëc gia n√†y theo ∆∞·ªõc t√≠nh ƒë√≥).</li> <li>Nguy c∆° n√†y ƒë∆∞·ª£c ghi nh·∫≠n c√≥ th·ªÉ tƒÉng cao h∆°n ·ªü c√°c nh√≥m ƒë·ªëi t∆∞·ª£ng sau: <ul> <li><strong>Tr·∫ª em:</strong> Do c√°c m√¥ ƒëang ph√°t tri·ªÉn nh·∫°y c·∫£m h∆°n v·ªõi b·ª©c x·∫°.</li> <li><strong>B·ªánh nh√¢n ch·ª•p <span lang="en">CT</span> l·∫∑p l·∫°i nhi·ªÅu l·∫ßn:</strong> Do s·ª± t√≠ch l≈©y li·ªÅu b·ª©c x·∫° theo th·ªùi gian.</li> <li><strong>C√°c kh·∫£o s√°t <span lang="en">CT</span> c√≥ li·ªÅu chi·∫øu cao:</strong> V√≠ d·ª• nh∆∞ <span lang="en">CT</span> b·ª•ng-ch·∫≠u, ng·ª±c, c·ªôt s·ªëng, ƒë·∫∑c bi·ªát khi th·ª±c hi·ªán nhi·ªÅu pha qu√©t (ƒëa pha).</li> </ul> </li> </ul> <hr> <h3>Khuy·∫øn ngh·ªã Quan tr·ªçng cho K·ªπ thu·∫≠t vi√™n H√¨nh ·∫£nh Y h·ªçc</h3> <ul> <li><strong>Ch·ªâ ƒë·ªãnh h·ª£p l√Ω:</strong> <span lang="en">CT</span> ch·ªâ n√™n ƒë∆∞·ª£c th·ª±c hi·ªán khi c√≥ ch·ªâ ƒë·ªãnh l√¢m s√†ng r√µ r√†ng v√† l·ª£i √≠ch ch·∫©n ƒëo√°n v∆∞·ª£t tr·ªôi nguy c∆° ti·ªÅm ·∫©n. <span lang="en">CT</span> kh√¥ng ph·∫£i l√† c√¥ng c·ª• t·∫ßm so√°t ung th∆∞ ƒë·∫°i tr√† cho m·ªçi ƒë·ªëi t∆∞·ª£ng.</li> <li><strong>Nguy√™n t·∫Øc ALARA:</strong> Lu√¥n tu√¢n th·ªß nghi√™m ng·∫∑t nguy√™n t·∫Øc ALARA (<span lang="en">As Low As Reasonably Achievable</span>) ‚Äì gi·ªØ li·ªÅu b·ª©c x·∫° ·ªü m·ª©c th·∫•p nh·∫•t c√≥ th·ªÉ m√† v·∫´n ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh ƒë·ªß cho ch·∫©n ƒëo√°n.</li> <li><strong>T·ªëi ∆∞u h√≥a <span lang="en">Protocol</span>:</strong> Ch·ªß ƒë·ªông t·ªëi ∆∞u h√≥a c√°c th√¥ng s·ªë k·ªπ thu·∫≠t nh∆∞ $kVp$, <span lang="en">mAs</span> (ho·∫∑c s·ª≠ d·ª•ng ƒëi·ªÅu bi·∫øn li·ªÅu t·ª± ƒë·ªông - <span lang="en">AEC/mAs modulation</span>), <span lang="en">pitch</span>, v√† gi·ªõi h·∫°n chi·ªÅu d√†i v√πng qu√©t (<span lang="en">scan length</span>) ph√π h·ª£p v·ªõi y√™u c·∫ßu l√¢m s√†ng v√† ƒë·∫∑c ƒëi·ªÉm b·ªánh nh√¢n.</li> <li><strong>H·∫°n ch·∫ø ch·ª•p ƒëa pha:</strong> Ch·ªâ th·ª±c hi·ªán c√°c pha qu√©t b·ªï sung (v√≠ d·ª•: pha ƒë·ªông m·∫°ch, tƒ©nh m·∫°ch, mu·ªôn) khi th·ª±c s·ª± c·∫ßn thi·∫øt v√† mang l·∫°i th√¥ng tin ch·∫©n ƒëo√°n gi√° tr·ªã th√™m.</li> <li><strong>C√¢n nh·∫Øc ƒë·ªëi t∆∞·ª£ng nh·∫°y c·∫£m:</strong> ƒê·∫∑c bi·ªát th·∫≠n tr·ªçng v√† c√¢n nh·∫Øc k·ªπ l∆∞·ª°ng l·ª£i √≠ch/nguy c∆° khi ch·ªâ ƒë·ªãnh <span lang="en">CT</span> cho tr·∫ª em, ph·ª• n·ªØ trong ƒë·ªô tu·ªïi sinh s·∫£n, v√† ng∆∞·ªùi tr·∫ª tu·ªïi.</li> </ul> <hr> <p class="emphasis-message">Vi·ªác √°p d·ª•ng k·ªπ thu·∫≠t ch·ª•p <span lang="en">CT</span> t·ªëi ∆∞u v√† ƒë√∫ng ch·ªâ ƒë·ªãnh l√† tr√°ch nhi·ªám ngh·ªÅ nghi·ªáp, kh√¥ng ch·ªâ ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh m√† c√≤n g√≥p ph·∫ßn quan tr·ªçng v√†o vi·ªác b·∫£o v·ªá b·ªánh nh√¢n kh·ªèi r·ªßi ro b·ª©c x·∫° kh√¥ng c·∫ßn thi·∫øt.</p> <p class="source-link"><a href="https://jamanetwork.com/journals/jamainternalmedicine/fullarticle/10.1001/jamainternmed.2025.0505" target="_blank" rel="noopener noreferrer">Tham kh·∫£o nghi√™n c·ª©u g·ªëc t·∫°i <span lang="en">JAMA</span></a> (L∆∞u √Ω: Link v√† th√¥ng tin b√†i b√°o c√≥ th·ªÉ c·∫ßn c·∫≠p nh·∫≠t)</p>
                </article>

                <article id="dlp-explanation" class="content-section explanation-section no-print">
                    <h2>Gi·∫£i th√≠ch v·ªÅ $DLP$ (<span lang="en">Dose-Length Product</span>)</h2>
                     <p>$DLP$ l√† m·ªôt ch·ªâ s·ªë quan tr·ªçng trong ch·∫©n ƒëo√°n <span lang="en">CT</span>, ƒë·∫°i di·ªán cho t·ªïng l∆∞·ª£ng ph∆°i nhi·ªÖm b·ª©c x·∫° d·ªçc theo chi·ªÅu d√†i c·ªßa v√πng ƒë∆∞·ª£c qu√©t. N√≥ ƒë∆∞·ª£c t√≠nh b·∫±ng t√≠ch c·ªßa ch·ªâ s·ªë li·ªÅu <span lang="en">CT</span> th·ªÉ t√≠ch ($CTDI_{vol}$) v√† chi·ªÅu d√†i v√πng qu√©t (<span lang="en">Scan Length</span>). ƒê∆°n v·ªã c·ªßa $DLP$ th∆∞·ªùng l√† $mGy \cdot cm$.</p> <h3>C√¥ng th·ª©c t√≠nh $DLP$:</h3> <div class="formula-display">$$DLP \; (mGy \cdot cm) = CTDI_{vol} \; (mGy) \times \text{Chi·ªÅu d√†i qu√©t} \; (cm)$$</div> <p>Trong ƒë√≥:</p> <ul> <li>$CTDI_{vol}$ (<span lang="en">Computed Tomography Dose Index Volume</span>): ∆Ø·ªõc t√≠nh li·ªÅu h·∫•p th·ª• trung b√¨nh trong th·ªÉ t√≠ch ƒë∆∞·ª£c chi·∫øu x·∫° c·ªßa m·ªôt l√°t c·∫Øt ƒë·∫°i di·ªán, ƒë√£ hi·ªáu ch·ªânh cho <span lang="en">pitch</span>. ƒê∆°n v·ªã l√† <span lang="en">miliGray</span> ($mGy$).</li> <li>Chi·ªÅu d√†i qu√©t (<span lang="en">Scan Length</span>): L√† t·ªïng chi·ªÅu d√†i c·ªßa v√πng c∆° th·ªÉ ƒë∆∞·ª£c bao ph·ªß b·ªüi ch√πm tia <span lang="en">X</span> trong qu√° tr√¨nh qu√©t, ƒë∆°n v·ªã <span lang="en">centimet</span> ($cm$).</li> </ul> <h3>√ù nghƒ©a v√† ·ª®ng d·ª•ng:</h3> <p>$DLP$ ph·∫£n √°nh t·ªïng nƒÉng l∆∞·ª£ng b·ª©c x·∫° ƒë∆∞·ª£c truy·ªÅn cho b·ªánh nh√¢n trong to√†n b·ªô cu·ªôc qu√©t. N√≥ l√† m·ªôt ch·ªâ s·ªë h·ªØu √≠ch ƒë·ªÉ:</p> <ul> <li>So s√°nh m·ª©c li·ªÅu gi·ªØa c√°c cu·ªôc qu√©t kh√°c nhau tr√™n c√πng m·ªôt b·ªánh nh√¢n ho·∫∑c gi·ªØa c√°c b·ªánh nh√¢n.</li> <li>Theo d√µi v√† qu·∫£n l√Ω li·ªÅu b·ª©c x·∫° t·∫°i c∆° s·ªü y t·∫ø.</li> <li>L√† ƒë·∫ßu v√†o quan tr·ªçng ƒë·ªÉ ∆∞·ªõc t√≠nh Li·ªÅu hi·ªáu d·ª•ng ($E$), gi√∫p ƒë√°nh gi√° nguy c∆° sinh h·ªçc t·ªïng th·ªÉ.</li> </ul> <h4>V√≠ d·ª• t√≠nh $DLP$:</h4> <p>N·∫øu m·ªôt cu·ªôc qu√©t <span lang="en">CT</span> b·ª•ng c√≥ $CTDI_{vol} = 10 \, mGy$ v√† chi·ªÅu d√†i qu√©t l√† $35 \, cm$, th√¨:</p> <div class="formula-display">$$DLP = 10 \, mGy \times 35 \, cm = 350 \, mGy \cdot cm$$</div>
                </article>

                <article id="effective-dose-explanation" class="content-section explanation-section no-print">
                    <h2>Gi·∫£i th√≠ch v·ªÅ Li·ªÅu hi·ªáu d·ª•ng ($E$)</h2>
                    <p>Li·ªÅu hi·ªáu d·ª•ng (<span lang="en">Effective Dose</span>, k√Ω hi·ªáu $E$) l√† m·ªôt ƒë·∫°i l∆∞·ª£ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b·ªüi ·ª¶y ban Qu·ªëc t·∫ø v·ªÅ An to√†n B·ª©c x·∫° (<span lang="en">ICRP</span>) ƒë·ªÉ ∆∞·ªõc t√≠nh nguy c∆° ng·∫´u nhi√™n d√†i h·∫°n (ch·ªß y·∫øu l√† nguy c∆° g√¢y ung th∆∞ v√† di truy·ªÅn) ƒë·ªëi v·ªõi s·ª©c kh·ªèe con ng∆∞·ªùi t·ª´ vi·ªác ph∆°i nhi·ªÖm b·ª©c x·∫° ion h√≥a. N√≥ t√≠nh ƒë·∫øn:</p> <ul> <li>L∆∞·ª£ng li·ªÅu h·∫•p th·ª• b·ªüi c√°c c∆° quan v√† m√¥ kh√°c nhau.</li> <li>Lo·∫°i b·ª©c x·∫° ion h√≥a (th√¥ng qua h·ªá s·ªë tr·ªçng s·ªë b·ª©c x·∫°, $W_R$, ƒë·ªëi v·ªõi tia X trong CT th√¨ $W_R=1$).</li> <li>ƒê·ªô nh·∫°y c·∫£m kh√°c nhau c·ªßa c√°c c∆° quan v√† m√¥ ƒë·ªëi v·ªõi t√°c ƒë·ªông c√≥ h·∫°i c·ªßa b·ª©c x·∫° (th√¥ng qua h·ªá s·ªë tr·ªçng s·ªë m√¥, $W_T$).</li> </ul> <p>ƒê∆°n v·ªã c·ªßa Li·ªÅu hi·ªáu d·ª•ng l√† <span lang="en">Sievert</span> ($Sv$), nh∆∞ng trong ch·∫©n ƒëo√°n y t·∫ø th∆∞·ªùng d√πng <span lang="en">miliSievert</span> ($mSv$), v·ªõi $1 \, Sv = 1000 \, mSv$.</p> <h3>C√¥ng th·ª©c t·ªïng qu√°t (theo <span lang="en">ICRP</span>):</h3> <div class="formula-display">$$E = \sum_T W_T \times H_T = \sum_T W_T \times \sum_R (W_R \times D_{T,R})$$</div> <p>Trong ƒë√≥:</p> <ul> <li>$H_T$: Li·ªÅu t∆∞∆°ng ƒë∆∞∆°ng ·ªü m√¥ ho·∫∑c c∆° quan $T$.</li> <li>$W_T$: H·ªá s·ªë tr·ªçng s·ªë m√¥ cho m√¥ $T$.</li> <li>$D_{T,R}$: Li·ªÅu h·∫•p th·ª• trung b√¨nh t·ª´ b·ª©c x·∫° $R$ trong m√¥ $T$.</li> <li>$W_R$: H·ªá s·ªë tr·ªçng s·ªë b·ª©c x·∫° cho lo·∫°i b·ª©c x·∫° $R$.</li> </ul> <h3>∆Ø·ªõc t√≠nh Li·ªÅu hi·ªáu d·ª•ng t·ª´ $DLP$ trong <span lang="en">CT</span>:</h3> <p>Trong th·ª±c h√†nh l√¢m s√†ng, vi·ªác t√≠nh $E$ theo c√¥ng th·ª©c ƒë·∫ßy ƒë·ªß l√† ph·ª©c t·∫°p. Do ƒë√≥, ng∆∞·ªùi ta th∆∞·ªùng s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p ∆∞·ªõc t√≠nh d·ª±a tr√™n $DLP$ v√† m·ªôt h·ªá s·ªë chuy·ªÉn ƒë·ªïi $k$ (<span lang="en">k-factor</span>) ƒë·∫∑c tr∆∞ng cho v√πng c∆° th·ªÉ ƒë∆∞·ª£c qu√©t. H·ªá s·ªë $k$ n√†y ƒë∆∞·ª£c t√≠nh to√°n d·ª±a tr√™n c√°c m√¥ h√¨nh <span lang="en">phantom</span> v√† ph√¢n b·ªë li·ªÅu ƒëi·ªÉn h√¨nh.</p> <div class="formula-display">$$E \; (mSv) \approx DLP \; (mGy \cdot cm) \times k \; (mSv \cdot mGy^{-1} \cdot cm^{-1})$$</div> <p>H·ªá s·ªë $k$ c√≥ gi√° tr·ªã kh√°c nhau cho c√°c v√πng c∆° th·ªÉ (v√≠ d·ª•: ƒë·∫ßu, ng·ª±c, b·ª•ng, ch·∫≠u) v√† c√≥ th·ªÉ kh√°c nhau m·ªôt ch√∫t gi·ªØa c√°c t√†i li·ªáu tham kh·∫£o ho·∫∑c chu·∫©n qu·ªëc gia.</p> <h3>√ù nghƒ©a trong th·ª±c h√†nh l√¢m s√†ng:</h3> <p>Li·ªÅu hi·ªáu d·ª•ng $E$ cho ph√©p:</p> <ul> <li>ƒê√°nh gi√° v√† so s√°nh nguy c∆° b·ª©c x·∫° ti·ªÅm ·∫©n t·ª´ c√°c lo·∫°i x√©t nghi·ªám h√¨nh ·∫£nh kh√°c nhau (v√≠ d·ª•: so s√°nh <span lang="en">CT</span> ng·ª±c v·ªõi X-quang ng·ª±c).</li> <li>H·ªó tr·ª£ vi·ªác c√¢n b·∫±ng gi·ªØa l·ª£i √≠ch ch·∫©n ƒëo√°n v√† nguy c∆° b·ª©c x·∫° khi l·ª±a ch·ªçn ho·∫∑c t·ªëi ∆∞u h√≥a quy tr√¨nh ch·ª•p.</li> <li>Theo d√µi li·ªÅu t√≠ch l≈©y cho b·ªánh nh√¢n, ƒë·∫∑c bi·ªát l√† nh·ªØng ng∆∞·ªùi c·∫ßn ch·ª•p chi·∫øu nhi·ªÅu l·∫ßn.</li> <li>Thi·∫øt l·∫≠p v√† ki·ªÉm tra c√°c m·ª©c tham chi·∫øu ch·∫©n ƒëo√°n qu·ªëc gia ho·∫∑c ƒë·ªãa ph∆∞∆°ng (<span lang="en">Diagnostic Reference Levels - DRLs</span>).</li> </ul> <h4>V√≠ d·ª• t√≠nh $E$:</h4> <p>S·ª≠ d·ª•ng v√≠ d·ª• $DLP = 350 \, mGy \cdot cm$ cho <span lang="en">CT</span> b·ª•ng. Gi·∫£ s·ª≠ h·ªá s·ªë $k$ cho v√πng b·ª•ng l√† $0.015 \, mSv \cdot mGy^{-1} \cdot cm^{-1}$:</p> <div class="formula-display">$$E \approx 350 \, mGy \cdot cm \times 0.015 \, mSv \cdot mGy^{-1} \cdot cm^{-1} = 5.25 \, mSv$$</div>
                </article>

                <article id="cancer-risk-explanation" class="content-section explanation-section no-print">
                    <h2>∆Ø·ªõc t√≠nh Nguy c∆° Ung th∆∞ t·ª´ Li·ªÅu hi·ªáu d·ª•ng</h2>
                    <p>Li·ªÅu hi·ªáu d·ª•ng ($E$) cung c·∫•p m·ªôt ph∆∞∆°ng ti·ªán ƒë·ªÉ ∆∞·ªõc t√≠nh nguy c∆° ung th∆∞ g√¢y ra b·ªüi b·ª©c x·∫° (<span lang="en">Radiation-Induced Cancer Risk</span>) ·ªü m·ª©c ƒë·ªô qu·∫ßn th·ªÉ, d·ª±a tr√™n m√¥ h√¨nh ƒë√°p ·ª©ng li·ªÅu. M√¥ h√¨nh ph·ªï bi·∫øn nh·∫•t ƒë∆∞·ª£c ch·∫•p nh·∫≠n cho m·ª•c ƒë√≠ch b·∫£o v·ªá b·ª©c x·∫° l√† m√¥ h√¨nh Tuy·∫øn t√≠nh kh√¥ng ng∆∞·ª°ng (<span lang="en">Linear No-Threshold - LNT</span>). M√¥ h√¨nh n√†y gi·∫£ ƒë·ªãnh r·∫±ng:</p> <ul> <li>Nguy c∆° ung th∆∞ tƒÉng tuy·∫øn t√≠nh v·ªõi li·ªÅu b·ª©c x·∫°.</li> <li>Kh√¥ng c√≥ ng∆∞·ª°ng li·ªÅu n√†o ƒë∆∞·ª£c coi l√† ho√†n to√†n an to√†n (b·∫•t k·ª≥ li·ªÅu n√†o, d√π nh·ªè, c≈©ng c√≥ th·ªÉ l√†m tƒÉng nguy c∆°).</li> </ul> <p>D·ª±a tr√™n c√°c b√°o c√°o khoa h·ªçc uy t√≠n nh∆∞ BEIR VII (<span lang="en">Biological Effects of Ionizing Radiation VII</span>) v√† c√°c ·∫•n ph·∫©m c·ªßa <span lang="en">ICRP</span>, nguy c∆° t·ª≠ vong do ung th∆∞ trong su·ªët cu·ªôc ƒë·ªùi ƒë∆∞·ª£c ∆∞·ªõc t√≠nh tƒÉng th√™m kho·∫£ng <strong>5.5% cho m·ªói <span lang="en">Sievert</span></strong> (t·ª©c l√† $0.0055$ cho m·ªói $Sv$, hay <strong>$5.5 \times 10^{-5}$ cho m·ªói $mSv$</strong>) ƒë·ªëi v·ªõi m·ªôt qu·∫ßn th·ªÉ h·ªón h·ª£p v·ªÅ ƒë·ªô tu·ªïi v√† gi·ªõi t√≠nh.</p> <p><strong>Nh·ªØng ƒëi·ªÉm c·∫ßn l∆∞u √Ω khi di·ªÖn gi·∫£i nguy c∆° n√†y:</strong></p> <ul> <li><strong>T√≠nh kh√¥ng ch·∫Øc ch·∫Øn:</strong> C√°c ∆∞·ªõc t√≠nh n√†y c√≥ ƒë·ªô kh√¥ng ch·∫Øc ch·∫Øn ƒë√°ng k·ªÉ, ƒë·∫∑c bi·ªát l√† ·ªü m·ª©c li·ªÅu th·∫•p th∆∞·ªùng g·∫∑p trong ch·∫©n ƒëo√°n y t·∫ø. Ch√∫ng ƒë∆∞·ª£c ngo·∫°i suy t·ª´ d·ªØ li·ªáu li·ªÅu cao (nh∆∞ nh·ªØng ng∆∞·ªùi s·ªëng s√≥t sau bom nguy√™n t·ª≠).</li> <li><strong>Nguy c∆° c√° nh√¢n vs. Qu·∫ßn th·ªÉ:</strong> C√°c h·ªá s·ªë nguy c∆° n√†y √°p d·ª•ng t·ªët nh·∫•t cho ƒë√°nh gi√° r·ªßi ro ·ªü c·∫•p ƒë·ªô qu·∫ßn th·ªÉ. Nguy c∆° th·ª±c t·∫ø cho m·ªôt c√° nh√¢n c·ª• th·ªÉ b·ªã ·∫£nh h∆∞·ªüng b·ªüi nhi·ªÅu y·∫øu t·ªë nh∆∞ tu·ªïi t·∫°i th·ªùi ƒëi·ªÉm ph∆°i nhi·ªÖm (tr·∫ª em v√† ng∆∞·ªùi tr·∫ª nh·∫°y c·∫£m h∆°n), gi·ªõi t√≠nh (ph·ª• n·ªØ th∆∞·ªùng c√≥ nguy c∆° cao h∆°n m·ªôt ch√∫t ƒë·ªëi v·ªõi m·ªôt s·ªë lo·∫°i ung th∆∞), ti·ªÅn s·ª≠ gia ƒë√¨nh, l·ªëi s·ªëng (h√∫t thu·ªëc), v√† c∆° quan n√†o nh·∫≠n li·ªÅu cao nh·∫•t.</li> <li><strong>M·ª•c ƒë√≠ch ch√≠nh:</strong> Vi·ªác ∆∞·ªõc t√≠nh nguy c∆° n√†y ch·ªß y·∫øu ph·ª•c v·ª• cho vi·ªác thi·∫øt l·∫≠p c√°c ti√™u chu·∫©n an to√†n b·ª©c x·∫°, t·ªëi ∆∞u h√≥a quy tr√¨nh (nguy√™n t·∫Øc ALARA), v√† truy·ªÅn th√¥ng nguy c∆° m·ªôt c√°ch c√¢n b·∫±ng, ch·ª© kh√¥ng ph·∫£i ƒë·ªÉ d·ª± ƒëo√°n ch√≠nh x√°c li·ªáu m·ªôt c√° nh√¢n c√≥ b·ªã ung th∆∞ do m·ªôt cu·ªôc ch·ª•p <span lang="en">CT</span> hay kh√¥ng.</li> </ul> <h3>V√≠ d·ª• ∆∞·ªõc t√≠nh nguy c∆°:</h3> <p>S·ª≠ d·ª•ng li·ªÅu hi·ªáu d·ª•ng t·ª´ v√≠ d·ª• <span lang="en">CT</span> b·ª•ng $E = 5.25 \, mSv$:</p> <div class="formula-display">$$\text{∆Ø·ªõc t√≠nh nguy c∆° t·ª≠ vong do ung th∆∞ tƒÉng th√™m} \approx 5.25 \, mSv \times (5.5 \times 10^{-5} / mSv) \approx 2.89 \times 10^{-4}$$</div> <p>Con s·ªë n√†y t∆∞∆°ng ƒë∆∞∆°ng v·ªõi kho·∫£ng <strong>1 tr∆∞·ªùng h·ª£p t·ª≠ vong do ung th∆∞ tƒÉng th√™m tr√™n kho·∫£ng 3460 ng∆∞·ªùi</strong> nh·∫≠n c√πng m·ª©c li·ªÅu n√†y. ƒê√¢y l√† m·ªôt m·ª©c tƒÉng nguy c∆° r·∫•t nh·ªè so v·ªõi nguy c∆° ung th∆∞ n·ªÅn t·ª± nhi√™n trong su·ªët cu·ªôc ƒë·ªùi (kho·∫£ng 20-25% d√¢n s·ªë t·ª≠ vong do ung th∆∞ t·ª´ m·ªçi nguy√™n nh√¢n c·ªông l·∫°i).</p> <p><strong>K·∫øt lu·∫≠n:</strong> M·∫∑c d√π nguy c∆° t·ª´ m·ªôt l·∫ßn ch·ª•p <span lang="en">CT</span> ƒë∆°n l·∫ª l√† th·∫•p, vi·ªác hi·ªÉu v√† ƒë·ªãnh l∆∞·ª£ng nguy c∆° n√†y gi√∫p nh·∫•n m·∫°nh t·∫ßm quan tr·ªçng c·ªßa vi·ªác ch·ªâ ƒë·ªãnh h·ª£p l√Ω v√† t·ªëi ∆∞u h√≥a li·ªÅu trong th·ª±c h√†nh l√¢m s√†ng h√†ng ng√†y ƒë·ªÉ gi·∫£m thi·ªÉu ph∆°i nhi·ªÖm b·ª©c x·∫° kh√¥ng c·∫ßn thi·∫øt cho b·ªánh nh√¢n.</p>
                </article>

                <section id="dose-comparison" class="content-section dose-comparison-section no-print">
                    <h2>Li·ªÅu hi·ªáu d·ª•ng trung b√¨nh t·ª´ c√°c k·ªπ thu·∫≠t X-quang v√† <span lang="en">CT</span></h2>
                    <p>B·∫£ng d∆∞·ªõi ƒë√¢y cung c·∫•p c√°c gi√° tr·ªã li·ªÅu hi·ªáu d·ª•ng ($E$) trung b√¨nh tham kh·∫£o cho m·ªôt s·ªë k·ªπ thu·∫≠t ch·∫©n ƒëo√°n h√¨nh ·∫£nh s·ª≠ d·ª•ng b·ª©c x·∫° ion h√≥a ph·ªï bi·∫øn. N√≥ c≈©ng so s√°nh m·ª©c li·ªÅu n√†y v·ªõi th·ªùi gian t∆∞∆°ng ƒë∆∞∆°ng nh·∫≠n li·ªÅu t·ª´ b·ª©c x·∫° n·ªÅn t·ª± nhi√™n (gi·∫£ ƒë·ªãnh m·ª©c n·ªÅn trung b√¨nh kho·∫£ng 3 mSv/nƒÉm).</p>
                    <table class="dose-table"> <thead> <tr> <th>K·ªπ thu·∫≠t (<span lang="en">Technique</span>)</th> <th>Li·ªÅu hi·ªáu d·ª•ng ($E$) ($mSv$)</th> <th>T∆∞∆°ng ƒë∆∞∆°ng b·ª©c x·∫° n·ªÅn</th> </tr> </thead> <tbody> <tr><td>X-quang Ng·ª±c (PA)</td><td>0.02 - 0.1</td><td>~ V√†i ng√†y - 10 ng√†y</td></tr> <tr><td>X-quang B·ª•ng (KUB)</td><td>0.7</td><td>~ 3 th√°ng</td></tr> <tr><td>X-quang C·ªôt s·ªëng th·∫Øt l∆∞ng</td><td>1.4</td><td>~ 6 th√°ng</td></tr> <tr><td>X-quang Chi (tay, ch√¢n)</td><td>&lt; 0.01</td><td>&lt; 1 ng√†y</td></tr> <tr><td>X-quang RƒÉng (Trong mi·ªáng)</td><td>0.005</td><td>~ 1 ng√†y</td></tr> <tr><td>X-quang To√†n c·∫£nh RƒÉng (Panoramic)</td><td>0.025</td><td>~ 3 ng√†y</td></tr> <tr><td>Ch·ª•p X-quang V√∫ KTS (Mammography)</td><td>0.21</td><td>~ 26 ng√†y</td></tr> <tr><td>Ch·ª•p X-quang V√∫ Tomosynthesis (3D)</td><td>0.27</td><td>~ 33 ng√†y</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> ƒê·∫ßu (Kh√¥ng c·∫£n quang)</td><td>1.6 - 2.0</td><td>~ 7-8 th√°ng</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> ƒê·∫ßu (C√≥ v√† kh√¥ng c·∫£n quang)</td><td>3.2 - 4.0</td><td>~ 13-16 th√°ng</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> Ng·ª±c (Li·ªÅu chu·∫©n)</td><td>6.1 - 8.0</td><td>~ 2 - 2.7 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> Ng·ª±c (T·∫ßm so√°t ung th∆∞ ph·ªïi li·ªÅu th·∫•p - LDCT)</td><td>1.0 - 1.5</td><td>~ 4-6 th√°ng</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> B·ª•ng</td><td>5.0 - 7.0</td><td>~ 1.7 - 2.3 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> B·ª•ng v√† Ch·∫≠u</td><td>7.7 - 10.0</td><td>~ 2.6 - 3.3 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> B·ª•ng v√† Ch·∫≠u (ƒëa pha)</td><td>15 - 20+</td><td>~ 5 - 7+ nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> C·ªôt s·ªëng</td><td>8.0 - 10.0</td><td>~ 2.7 - 3.3 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> M·∫°ch v√†nh (<span lang="en">Coronary CTA</span>)</td><td>5.0 - 15.0 (thay ƒë·ªïi nhi·ªÅu)</td><td>~ 1.7 - 5 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">CT</span> ƒê√°nh gi√° v√¥i h√≥a m·∫°ch v√†nh (<span lang="en">Calcium Scoring</span>)</td><td>1.0 - 3.0</td><td>~ 4 th√°ng - 1 nƒÉm</td></tr> <tr><td>Ch·ª•p <span lang="en">PET/CT</span> (To√†n th√¢n, d√πng $^{18}$F-FDG)</td><td>15.0 - 25.0</td><td>~ 5 - 8.3 nƒÉm</td></tr> <tr><td>ƒêo m·∫≠t ƒë·ªô x∆∞∆°ng (<span lang="en">DEXA</span>)</td><td>~ 0.001</td><td>~ V√†i gi·ªù</td></tr> </tbody> </table> <div class="source"> <p><strong>Ngu·ªìn tham kh·∫£o:</strong> D·ªØ li·ªáu t·ªïng h·ª£p t·ª´ <span lang="en">ACR</span>, <span lang="en">RadiologyInfo.org</span>, <span lang="en">ICRP</span>, v√† c√°c nghi√™n c·ª©u. <strong>L∆∞u √Ω:</strong> C√°c gi√° tr·ªã n√†y l√† trung b√¨nh v√† li·ªÅu th·ª±c t·∫ø cho m·ªói b·ªánh nh√¢n c√≥ th·ªÉ thay ƒë·ªïi ƒë√°ng k·ªÉ t√πy thu·ªôc v√†o thi·∫øt b·ªã, k·ªπ thu·∫≠t ch·ª•p, k√≠ch th∆∞·ªõc b·ªánh nh√¢n v√† c∆° s·ªü y t·∫ø.</p> </div>
                </section>

            </main>

            <footer class="main-footer no-print">
               <div>
                 <p>¬© <span id="copyright-year"></span> <strong>C·ªông ƒë·ªìng K·ªπ thu·∫≠t vi√™n h√¨nh ·∫£nh y h·ªçc Vi·ªát Nam</strong> ‚Äì V√¨ m·ª•c ƒë√≠ch an to√†n b·ª©c x·∫° trong y t·∫ø</span></p>
                 <p>Bi√™n so·∫°n b·ªüi nh√≥m <strong>KTV 3 Mi·ªÅn</strong> | M·ª•c ƒë√≠ch: ƒê√†o t·∫°o & Tham kh·∫£o y khoa</p>
               <p><em>Tuy√™n b·ªë mi·ªÖn tr·ª´ tr√°ch nhi·ªám: Th√¥ng tin tr√™n trang web n√†y ch·ªâ mang t√≠nh tham kh·∫£o, kh√¥ng thay th·∫ø cho ch·∫©n ƒëo√°n, ch·ªâ ƒë·ªãnh ho·∫∑c t∆∞ v·∫•n y t·∫ø chuy√™n nghi·ªáp t·ª´ b√°c sƒ© ho·∫∑c chuy√™n gia y t·∫ø c√≥ tr√¨nh ƒë·ªô.</em></p>
                 <p>Ch·ªãu tr√°ch nhi·ªám n·ªôi dung v√† thi·∫øt k·∫ø:<strong>L√™ Thanh Tr·ªçng - 0944406507</strong>
               </div>
            </footer>

        </div> </div> <div id="print-output-container">
        <div id="print-title">B√ÅO C√ÅO LI·ªÄU HI·ªÜU D·ª§NG CT ∆Ø·ªöC T√çNH</div>

        <div class="print-section" id="print-patient-info">
            <h4>Th√¥ng tin B·ªánh nh√¢n</h4>
            <p><span class="print-label">T√™n:</span><span id="print-patient-name-data">---</span></p>
            <p><span class="print-label">Tu·ªïi:</span><span id="print-patient-age-data">---</span></p>
            <p><span class="print-label">ID:</span><span id="print-patient-id-data">---</span></p>
        </div>

        <div class="print-section" id="print-input-params">
            <h4>Th√¥ng s·ªë Qu√©t</h4>
            <p><span class="print-label">V√πng c∆° th·ªÉ:</span><span id="print-body-region-data">---</span></p>
            <p><span class="print-label">Gi√° tr·ªã DLP:</span><span id="print-dlp-value-data">--- mGy¬∑cm</span></p>
        </div>

        <div id="print-formula">
            C√¥ng th·ª©c: E (mSv) = DLP (mGy¬∑cm) √ó k (mSv¬∑mGy‚Åª¬π¬∑cm‚Åª¬π)
        </div>

        <div id="print-result-dose">
            Li·ªÅu hi·ªáu d·ª•ng ∆∞·ªõc t√≠nh (E): --- mSv
        </div>

        <div class="print-section" id="print-risk-warning">
             </div>

        <div id="print-date-footer">
            Ng√†y t·∫°o b√°o c√°o: <span id="print-date"></span>
        </div>
    </div>

    <script>
        // --- BEGIN: Smooth Scrolling & Active Nav Link Script ---
        const navLinks = document.querySelectorAll('.side-nav a[href^="#"]');
        const sections = document.querySelectorAll('section[id], article[id]');

        function changeActiveLink() {
            let index = sections.length;
            let currentScroll = window.scrollY;
            while(--index && sections[index].offsetTop > currentScroll + 50) {}
            navLinks.forEach((link) => link.classList.remove('active'));
            if(index >= 0 && navLinks[index]) { navLinks[index].classList.add('active'); }
            else if (currentScroll < (sections.length > 0 ? sections[0].offsetTop - 50 : 0)) { if(navLinks[0]) navLinks[0].classList.add('active'); }
        }
        let isScrolling = false; let scrollTimeout;
        if (sections.length > 0) changeActiveLink(); // Initial check only if sections exist
        window.addEventListener('scroll', () => { if (!isScrolling) { changeActiveLink(); } });
        navLinks.forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault(); isScrolling = true; const targetId = this.getAttribute('href');
                try {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                         navLinks.forEach(link => link.classList.remove('active')); this.classList.add('active');
                        const offsetTop = targetElement.offsetTop - 15;
                        window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                         clearTimeout(scrollTimeout); scrollTimeout = setTimeout(() => { isScrolling = false; }, 800);
                    } else { console.warn(`Smooth scroll target not found: ${targetId}`); isScrolling = false; }
                } catch (error) { console.error(`Error scrolling to target: ${targetId}`, error); isScrolling = false; }
            });
        });
        // --- END: Smooth Scrolling & Active Nav Link Script ---

        // --- BEGIN: Calculator Script ---
        const bodyRegionSelect = document.getElementById("bodyRegion");
        const kValueInput = document.getElementById("kValue");
        const dlpInput = document.getElementById("dlp");
        const patientNameInput = document.getElementById("patientName");
        const patientAgeInput = document.getElementById("patientAge");
        const patientIdInput = document.getElementById("patientId");
        const resultDiv = document.getElementById("resultDose");
        const riskWarningDiv = document.getElementById("riskWarning");
        const calculateButton = document.getElementById("calculateButton");
        const printButton = document.getElementById("printButton");
        // Print Output References
        const printPatientNameData = document.getElementById("print-patient-name-data");
        const printPatientAgeData = document.getElementById("print-patient-age-data");
        const printPatientIdData = document.getElementById("print-patient-id-data");
        const printBodyRegionData = document.getElementById("print-body-region-data");
        const printDlpValueData = document.getElementById("print-dlp-value-data");
        const printFormula = document.getElementById("print-formula");
        const printResultDose = document.getElementById("print-result-dose");
        const printRiskWarning = document.getElementById("print-risk-warning");
        const printDate = document.getElementById("print-date");

        function updateK() { if(bodyRegionSelect) kValueInput.value = bodyRegionSelect.value; }

        function clearPrintOutput() {
             if(printPatientNameData) printPatientNameData.textContent = "---";
             if(printPatientAgeData) printPatientAgeData.textContent = "---";
             if(printPatientIdData) printPatientIdData.textContent = "---";
             if(printBodyRegionData) printBodyRegionData.textContent = "---";
             if(printDlpValueData) printDlpValueData.textContent = "--- mGy¬∑cm";
             if(printFormula) printFormula.textContent = `C√¥ng th·ª©c: E (mSv) = DLP (mGy¬∑cm) √ó k (mSv¬∑mGy‚Åª¬π¬∑cm‚Åª¬π)`;
             if(printResultDose) printResultDose.textContent = "Li·ªÅu hi·ªáu d·ª•ng ∆∞·ªõc t√≠nh (E): --- mSv";
             if(printRiskWarning) printRiskWarning.innerHTML = "";
             if(printDate) printDate.textContent = "";
        }

        function calculateDose() {
          if (!resultDiv || !riskWarningDiv || !printButton) return; // Exit if essential elements missing

          resultDiv.textContent = ""; resultDiv.className = "result-display no-print";
          riskWarningDiv.innerHTML = ""; riskWarningDiv.style.display = "none";
          printButton.style.display = "none"; clearPrintOutput();

          if (!bodyRegionSelect || !dlpInput || !kValueInput || !patientNameInput || !patientAgeInput || !patientIdInput ) return; // Exit if input elements missing

          const dlp = parseFloat(dlpInput.value); const k = parseFloat(kValueInput.value);
          const patientName = patientNameInput.value.trim(); const patientAge = patientAgeInput.value.trim();
          const patientId = patientIdInput.value.trim();
          const selectedRegionOption = bodyRegionSelect.options[bodyRegionSelect.selectedIndex];
          const selectedRegionText = selectedRegionOption.value ? selectedRegionOption.text : "---";

          if (bodyRegionSelect.value === "") { resultDiv.textContent = "‚ö†Ô∏è Vui l√≤ng ch·ªçn v√πng c∆° th·ªÉ."; resultDiv.classList.add("error"); return; }
          if (isNaN(dlp) || dlp <= 0) { resultDiv.textContent = `‚ö†Ô∏è Vui l√≤ng nh·∫≠p gi√° tr·ªã DLP h·ª£p l·ªá (s·ªë d∆∞∆°ng). Gi√° tr·ªã nh·∫≠p: "${dlpInput.value}"`; resultDiv.classList.add("error"); return; }

          const dose = dlp * k; const roundedDose = Math.round(dose * 100) / 100;
          resultDiv.textContent = `Li·ªÅu hi·ªáu d·ª•ng ∆∞·ªõc t√≠nh (E): ${roundedDose} mSv`; resultDiv.classList.add("success");

          const riskFactorPerMSv = 5.5e-5; const additionalRisk = roundedDose * riskFactorPerMSv;
          let warningMessageHTML = ""; let printWarningMessageHTML = "";

          if (additionalRisk > 0) {
              const oneInY = Math.round(1 / additionalRisk); const formattedOneInY = oneInY.toLocaleString('vi-VN');
              const riskText = (oneInY > 0 && oneInY < 1000000) ? `t∆∞∆°ng ƒë∆∞∆°ng v·ªõi r·ªßi ro ∆∞·ªõc t√≠nh kho·∫£ng <strong>1</strong> tr∆∞·ªùng h·ª£p t·ª≠ vong do ung th∆∞ ph√°t sinh th√™m tr√™n <strong>${formattedOneInY}</strong> ng∆∞·ªùi nh·∫≠n c√πng m·ª©c li·ªÅu n√†y.` : `l√† m·ªôt m·ª©c tƒÉng nguy c∆° r·∫•t nh·ªè v·ªÅ m·∫∑t th·ªëng k√™.`;
               warningMessageHTML = `<p><strong>Th√¥ng tin tham kh·∫£o v·ªÅ Nguy c∆° B·ª©c x·∫° (D·ª±a tr√™n m√¥ h√¨nh LNT):</strong></p><p>M·ª©c li·ªÅu hi·ªáu d·ª•ng <strong>${roundedDose} mSv</strong> ${riskText}</p><p><em>ƒêi·ªÅu quan tr·ªçng c·∫ßn l∆∞u √Ω:</em></p><ul><li>ƒê√¢y l√† <strong>∆∞·ªõc t√≠nh nguy c∆° d·ª±a tr√™n th·ªëng k√™</strong> cho c·∫£ c·ªông ƒë·ªìng v√† c√≥ ƒë·ªô kh√¥ng ch·∫Øc ch·∫Øn ƒë√°ng k·ªÉ, ƒë·∫∑c bi·ªát ·ªü m·ª©c li·ªÅu th·∫•p.</li><li>Nguy c∆° <strong>th·ª±c t·∫ø cho m·ªói c√° nh√¢n</strong> ph·ª• thu·ªôc v√†o nhi·ªÅu y·∫øu t·ªë: tu·ªïi, gi·ªõi t√≠nh, di truy·ªÅn, l·ªëi s·ªëng, c∆° quan nh·∫≠n li·ªÅu, v.v.</li><li>M·ª©c tƒÉng nguy c∆° <strong>c·ªông th√™m</strong> n√†y r·∫•t nh·ªè so v·ªõi nguy c∆° ung th∆∞ n·ªÅn t·ª± nhi√™n (~20-25%).</li><li>Th√¥ng tin n√†y nh·∫•n m·∫°nh t·∫ßm quan tr·ªçng c·ªßa vi·ªác ch·ªâ ƒë·ªãnh h·ª£p l√Ω v√† t·ªëi ∆∞u h√≥a li·ªÅu (ALARA), <strong>kh√¥ng</strong> ph·∫£i l√† d·ª± ƒëo√°n s·ª©c kh·ªèe c√° nh√¢n.</li></ul>`;
               printWarningMessageHTML = `<p>V·ªõi m·ª©c li·ªÅu hi·ªáu d·ª•ng <strong>${roundedDose} mSv</strong>, ${riskText.replace(/<strong>/g,'').replace(/<\/strong>/g,'')}</p><p><strong>L∆∞u √Ω quan tr·ªçng:</strong> ∆Ø·ªõc t√≠nh n√†y d·ª±a tr√™n th·ªëng k√™ qu·∫ßn th·ªÉ v√† c√≥ ƒë·ªô kh√¥ng ch·∫Øc ch·∫Øn ƒë√°ng k·ªÉ ·ªü li·ªÅu th·∫•p. Nguy c∆° th·ª±c t·∫ø cho c√° nh√¢n ph·ª• thu·ªôc v√†o nhi·ªÅu y·∫øu t·ªë v√† m·ª©c tƒÉng n√†y r·∫•t nh·ªè so v·ªõi nguy c∆° ung th∆∞ n·ªÅn. Lu√¥n c√¢n nh·∫Øc l·ª£i √≠ch ch·∫©n ƒëo√°n v√† √°p d·ª•ng nguy√™n t·∫Øc ALARA.</p>`;

              riskWarningDiv.innerHTML = warningMessageHTML; riskWarningDiv.style.display = "block";
              printButton.style.display = "inline-block";

              // Populate print area (check if elements exist first)
              if(printPatientNameData) printPatientNameData.textContent = patientName || '---';
              if(printPatientAgeData) printPatientAgeData.textContent = patientAge || '---';
              if(printPatientIdData) printPatientIdData.textContent = patientId || '---';
              if(printBodyRegionData) printBodyRegionData.textContent = selectedRegionText;
              if(printDlpValueData) printDlpValueData.textContent = `${dlpInput.value} mGy¬∑cm`;
              if(printFormula) printFormula.textContent = `C√¥ng th·ª©c: E (${roundedDose.toFixed(2)} mSv) = DLP (${dlpInput.value} mGy¬∑cm) √ó k (${k})`;
              if(printResultDose) printResultDose.textContent = `Li·ªÅu hi·ªáu d·ª•ng ∆∞·ªõc t√≠nh (E): ${roundedDose} mSv`;
              if(printRiskWarning) printRiskWarning.innerHTML = printWarningMessageHTML;
              const today = new Date();
              if(printDate) printDate.textContent = today.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });

          } else { printButton.style.display = "none"; clearPrintOutput(); }
        }

        // --- Event Listeners ---
        if(bodyRegionSelect) bodyRegionSelect.addEventListener("change", updateK);
        if(calculateButton) calculateButton.addEventListener("click", calculateDose);
        if(dlpInput) dlpInput.addEventListener("keypress", function(event) { if (event.key === "Enter") { event.preventDefault(); calculateDose(); } });
        if(patientNameInput) patientNameInput.addEventListener("keypress", function(event) { if (event.key === "Enter") { event.preventDefault(); calculateDose(); }});
        if(patientAgeInput) patientAgeInput.addEventListener("keypress", function(event) { if (event.key === "Enter") { event.preventDefault(); calculateDose(); }});
        if(patientIdInput) patientIdInput.addEventListener("keypress", function(event) { if (event.key === "Enter") { event.preventDefault(); calculateDose(); }});
        if(printButton) printButton.addEventListener("click", function() { window.print(); });
        // --- END: Calculator Script ---

        // Set copyright year dynamically
        const copyrightYearSpan = document.getElementById('copyright-year');
        if(copyrightYearSpan) { copyrightYearSpan.textContent = new Date().getFullYear(); }
        // Initial K value update on page load
        if(bodyRegionSelect) updateK();

    </script>

</body>
</html>
